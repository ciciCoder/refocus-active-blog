import{R as Mt,j as re,a as T,F as Xe,r as Te,u as Ft,b as kt,L as qt,n as Ht}from"./index-530819fe.js";import{u as Dt,T as Ce}from"./index.esm-4be3f7fe.js";function Bt(F,K){const{children:k,id:b,...f}=F;return re("div",{children:[T("input",{id:b,...f,type:"file",hidden:!0,ref:K}),T("label",{htmlFor:b,className:"btn-rect btn-hover relative cursor-pointer",children:k})]})}const Lt=Mt.forwardRef(Bt);var Ye={exports:{}},He={exports:{}},Ge;function Wt(){return Ge||(Ge=1,function(F){F.exports=function(){var K={"./src/index.ts":function(f,l,_){_.r(l),_.d(l,{beginMultipartUpload:function(){return le},completeUploadPart:function(){return ue},getUploadPart:function(){return fe},request:function(){return J}});function H(a,i,d){return d?i?i(a):a:((!a||!a.then)&&(a=Promise.resolve(a)),i?a.then(i):a)}function U(a){return function(){for(var i=[],d=0;d<arguments.length;d++)i[d]=arguments[d];try{return Promise.resolve(a.apply(this,i))}catch(m){return Promise.reject(m)}}}var J=U(function(a,i){var d=de(a,i);return H(oe(a,i,d),function(m){var p=z(m),g=X(m,i.responseHeader);return{url:d,ok:m.status>=200&&m.status<300,status:m.status,statusText:m.statusText,body:g||p}})}),oe=U(function(a,i,d){var m=new XMLHttpRequest;return m.open(i.method,d,!0),m.withCredentials=a.WITH_CREDENTIALS,H(ae(a,i),function(p){return p.forEach(function(g,L){m.setRequestHeader(L,g)}),new Promise(function(g){m.onreadystatechange=function(){m.readyState===XMLHttpRequest.DONE&&g(m)},m.send(D(i))})})}),ae=U(function(a,i){return H(ie(i,a.USERNAME),function(d){return H(ie(i,a.PASSWORD),function(m){return H(ie(i,a.HEADERS),function(p){var g=new Headers(Object.assign(Object.assign({Accept:Q},p),i.headers));if(te(d)&&te(m)){var L=btoa("".concat(d,":").concat(m));g.append("Authorization","Basic ".concat(L))}return i.body&&g.append(E,Q),g})})})}),ie=U(function(a,i){return typeof i=="function"?i(a):i}),E="Content-Type",Q="application/json";function j(a){return a!=null}function te(a){return typeof a=="string"&&a!==""}function ne(a){var i=[];return Object.keys(a).forEach(function(d){var m=a[d];j(m)&&(Array.isArray(m)?m.forEach(function(p){i.push("".concat(encodeURIComponent(d),"=").concat(encodeURIComponent(String(p))))}):i.push("".concat(encodeURIComponent(d),"=").concat(encodeURIComponent(String(m)))))}),i.length>0?"?".concat(i.join("&")):""}function de(a,i){var d=i.path.replace(/[:]/g,"_"),m="".concat(a.BASE).concat(d);return i.query?"".concat(m).concat(ne(i.query)):m}function D(a){if(a.body)return JSON.stringify(a.body)}function X(a,i){return i?a.getResponseHeader(i):null}function z(a){var i=a.getResponseHeader(E);if(i){var d=i.toLowerCase().startsWith(Q);return d?JSON.parse(a.responseText):a.responseText}return null}function V(a){return function(){for(var i=[],d=0;d<arguments.length;d++)i[d]=arguments[d];try{return Promise.resolve(a.apply(this,i))}catch(m){return Promise.reject(m)}}}var fe=V(function(a,i,d,m){return J(a,{method:"GET",path:"".concat(N).concat(i).concat(B,"/").concat(d).concat(C).concat(m)})}),ue=V(function(a,i,d,m,p){return J(a,{method:"PUT",path:"".concat(N).concat(i).concat(B,"/").concat(d).concat(C).concat(m),body:p})}),le=V(function(a,i,d){return J(a,{method:"POST",path:"".concat(N).concat(i).concat(B),body:d})}),N="/v2/accounts/",B="/uploads",C="/parts/"}},k={};function b(f){if(k[f])return k[f].exports;var l=k[f]={exports:{}};return K[f](l,l.exports,b),l.exports}return function(){b.d=function(f,l){for(var _ in l)b.o(l,_)&&!b.o(f,_)&&Object.defineProperty(f,_,{enumerable:!0,get:l[_]})}}(),function(){b.o=function(f,l){return Object.prototype.hasOwnProperty.call(f,l)}}(),function(){b.r=function(f){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})}}(),b("./src/index.ts")}()}(He)),He.exports}var De={exports:{}},Qe;function Kt(){return Qe||(Qe=1,function(F){F.exports=function(){var K={"./src/index.ts":function(f,l,_){_.r(l),_.d(l,{ProgressSmoother:function(){return H}});function H(U){var J,oe,ae=1e3,ie=.33,E=(J=U.minDelayUntilFirstValue)!==null&&J!==void 0?J:0,Q=(oe=U.teardownTime)!==null&&oe!==void 0?oe:0,j=U.valueIncreaseRatePerSecond,te=U.averageTimeBetweenValues,ne=U.maxValue,de=U.valueIncreaseDelta,D,X=Date.now(),z=0,V=0;function fe(p){var g=p();return g>z&&(z=g),z}function ue(p){return p.value===ne}function le(p,g){if(ue(p)){var L=Math.max(ae,Q),ce=g-p.time,pe=ce/L,he=Math.min(1,pe),me=a(he),Ae=p.value-V;return V+Ae*me}return C(p.value,g,X)}function N(p){var g=Math.min(de,ne*ie),L=g/j*1e3,ce=E+L,pe=p-X,he=pe/ce,me=Math.min(1,he);return me*g}function B(p,g){var L=3.5;return 1-Math.exp(-(p-g)/(te*L))}function C(p,g,L){var ce=B(g,L);return ce*p+(1-ce)*V}function a(p){return p*p}function i(p,g){if(D!==void 0){if(ue(D))return;V=C(D.value,D.time,X),X=D.time}D={time:g??Date.now(),value:Math.min(p,ne)}}function d(p){return fe(function(){var g=p??Date.now();return D!==void 0?le(D,g):N(g)})}function m(p){return d(p)/ne}return{setValue:i,smoothedValue:d,smoothedFactor:m}}}},k={};function b(f){if(k[f])return k[f].exports;var l=k[f]={exports:{}};return K[f](l,l.exports,b),l.exports}return function(){b.d=function(f,l){for(var _ in l)b.o(l,_)&&!b.o(f,_)&&Object.defineProperty(f,_,{enumerable:!0,get:l[_]})}}(),function(){b.o=function(f,l){return Object.prototype.hasOwnProperty.call(f,l)}}(),function(){b.r=function(f){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})}}(),b("./src/index.ts")}()}(De)),De.exports}(function(F){F.exports=function(){var K={"./src/index.ts":function(f,l,_){_.r(l),_.d(l,{Upload:function(){return st},UploadApiError:function(){return L}});var H=Wt();function U(e,t,n){if(n)return t?t(e()):e();try{var r=Promise.resolve(e());return t?r.then(t):r}catch(s){return Promise.reject(s)}}function J(e,t){if(e)throw t;return t}function oe(e,t){try{var n=e()}catch(r){return t(!0,r)}return n&&n.then?n.then(t.bind(null,!1),t.bind(null,!0)):t(!1,n)}function ae(){}function ie(e,t){if(!t)return e&&e.then?e.then(ae):Promise.resolve()}function E(e,t,n){if(!e.s){if(n instanceof Q)if(n.s)t&1&&(t=n.s),n=n.v;else{n.o=E.bind(null,e,t);return}if(n&&n.then){n.then(E.bind(null,e,t),E.bind(null,e,2));return}e.s=t,e.v=n;var r=e.o;r&&r(e)}}var Q=function(){function e(){}return e.prototype.then=function(t,n){var r=new e,s=this.s;if(s){var v=s&1?t:n;if(v){try{E(r,1,v(this.v))}catch(x){E(r,2,x)}return r}else return this}return this.o=function(x){try{var R=x.v;x.s&1?E(r,1,t?t(R):R):n?E(r,1,n(R)):E(r,2,R)}catch(M){E(r,2,M)}},r},e}();function j(e){return e instanceof Q&&e.s&1}function te(e,t,n){for(var r;;){var s=e();if(j(s)&&(s=s.v),!s)return v;if(s.then){r=0;break}var v=n();if(v&&v.then)if(j(v))v=v.s;else{r=1;break}if(t){var x=t();if(x&&x.then&&!j(x)){r=2;break}}}var R=new Q,M=E.bind(null,R,2);return(r===0?s.then(q):r===1?v.then(Y):x.then(ge)).then(void 0,M),R;function Y(ye){v=ye;do{if(t&&(x=t(),x&&x.then&&!j(x))){x.then(ge).then(void 0,M);return}if(s=e(),!s||j(s)&&!s.v){E(R,1,v);return}if(s.then){s.then(q).then(void 0,M);return}v=n(),j(v)&&(v=v.v)}while(!v||!v.then);v.then(Y).then(void 0,M)}function q(ye){ye?(v=n(),v&&v.then?v.then(Y).then(void 0,M):Y(v)):E(R,1,v)}function ge(){(s=e())?s.then?s.then(q).then(void 0,M):q(s):E(R,1,v)}}function ne(e,t){return e&&e.then?e.then(t):t(e)}function de(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(r){return Promise.reject(r)}}}function D(){var e,t,n=function(x){return U(r,function(){return oe(x,function(R,M){return s(),J(R,M)})})},r=de(function(){return ne(te(function(){return e!==void 0},void 0,function(){return ie(e)}),function(){e=new Promise(function(v){t=v})})}),s=function(){if(t===void 0)throw new Error("Unable to release mutex: already released.");t(),t=void 0,e=void 0};return{safe:n}}var X=Kt();function z(e){"@babel/helpers - typeof";return z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},z(e)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fe(e,t,n){return t&&V(e.prototype,t),n&&V(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function N(e){var t=d();return function(){var r=g(e),s;if(t){var v=g(this).constructor;s=Reflect.construct(r,arguments,v)}else s=r.apply(this,arguments);return B(this,s)}}function B(e,t){if(t&&(z(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C(e)}function C(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){var t=typeof Map=="function"?new Map:void 0;return a=function(r){if(r===null||!m(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(r))return t.get(r);t.set(r,s)}function s(){return i(r,arguments,g(this).constructor)}return s.prototype=Object.create(r.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),p(s,r)},a(e)}function i(e,t,n){return d()?i=Reflect.construct:i=function(s,v,x){var R=[null];R.push.apply(R,v);var M=Function.bind.apply(s,R),Y=new M;return x&&p(Y,x.prototype),Y},i.apply(null,arguments)}function d(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function m(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function p(e,t){return p=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},p(e,t)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},g(e)}var L=function(e){le(n,e);var t=N(n);function n(r){var s;return ue(this,n),s=t.call(this,r.error.message),s.errorCode=r.error.code,s.details=r.error.details,s}return fe(n)}(a(Error));function ce(e,t){if(e)throw t;return t}function pe(e,t){try{var n=e()}catch(r){return t(!0,r)}return n&&n.then?n.then(t.bind(null,!1),t.bind(null,!0)):t(!1,n)}function he(e){if(e&&e.then)return e.then(we)}function me(e){return tt(e)||et(e)||Ze(e)||Ae()}function Ae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ze(e,t){if(e){if(typeof e=="string")return Ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ee(e,t)}}function et(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tt(e){if(Array.isArray(e))return Ee(e)}function Ee(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function we(){}var Be=7;function se(e,t){if(!t)return e&&e.then?e.then(we):Promise.resolve()}var nt="W142hJk";function P(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(r){return Promise.reject(r)}}}var rt=["free","demo"];function O(e,t,n){return n?t?t(e):e:((!e||!e.then)&&(e=Promise.resolve(e)),t?e.then(t):e)}var Re="public_";function Pe(e,t,n){if(n)return t?t(e()):e();try{var r=Promise.resolve(e());return t?r.then(t):r}catch(s){return Promise.reject(s)}}var ot=5;function Ie(e,t){return Pe(e,we,t)}var at=20;function Le(e,t){try{var n=e()}catch(r){return t(r)}return n&&n.then?n.then(void 0,t):n}var it=100;function We(e){var t=e();if(t&&t.then)return t.then(we)}var ut=5,Oe=10,ct="/api/v1/access_tokens/",W="[upload-js] ";function st(e){var t,n,r,s,v,x,R,M,Y,q,ge=D(),ye=(n=(t=e.internal)===null||t===void 0?void 0:t.apiUrl)!==null&&n!==void 0?n:"https://api.upload.io",Ke=(s=(r=e.internal)===null||r===void 0?void 0:r.cdnUrl)!==null&&s!==void 0?s:"https://upcdn.io",ft=(x=(v=e.internal)===null||v===void 0?void 0:v.authenticateWithApiKey)!==null&&x!==void 0?x:!0,xe=(R=e.internal)===null||R===void 0?void 0:R.headers,lt=e.debug===!0,Ue=" was called.",$;if((e??void 0)===void 0)throw new Error("".concat(W,"Config parameter required."));if(e.debug===!0&&console.log("".concat(W,"Initialized with API key '").concat(e.apiKey,"'")),((M=e.apiKey)!==null&&M!==void 0?M:void 0)===void 0)throw new Error("".concat(W,"Please provide an API key via the 'apiKey' config parameter."));if(e.apiKey.trim()!==e.apiKey)throw new Error("".concat(W,"API key needs trimming (whitespace detected)."));if(((Y=e.internal)===null||Y===void 0?void 0:Y.authenticateWithApiKey)===!1)q=e.internal.accountId;else if(rt.includes(e.apiKey))q=nt;else{if(!e.apiKey.startsWith(Re))throw new Error("".concat(W,'API key must begin with "').concat(Re,'".'));if(q=e.apiKey.substr(Re.length,Be),q.length!==Be)throw new Error("".concat(W,"API key is too short!"))}var $e="".concat(Ke).concat(ct).concat(q),dt=P(function(c,o){return se(ze(P(function(u){return u.beginAuthSession(c,o)}),P(function(){if(Z("'beginAuthSession'".concat(Ue)),($==null?void 0:$.authUrl)===c){Fe("'beginAuthSession' already called. Ignoring this call. Hint: call 'endAuthSession' and then 'beginAuthSession' if you want to restart the auth session.");return}return Pe(Je,function(){var u={accessToken:void 0,accessTokenRefreshHandle:void 0,isActive:!0,authUrl:c};return $=u,se(je(c,o,u))})})))}),pt=P(function(){return se(ze(P(function(c){return c.endAuthSession()}),P(function(){return Z("'endAuthSession'".concat(Ue)),Ie(Je)})))}),vt=P(function(c){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Z("'uploadFile'".concat(Ue));var u=[],y=function(I){u.push(I)},h=function(){return u.forEach(function(I){return I()})};return o.onBegin!==void 0&&o.onBegin({cancel:h}),Le(function(){return O(mt(c,o,y))},function(w){throw h(),w})}),ht=function(o,u){var y,h="raw",w=typeof u=="string"?{transformation:u}:u;return"".concat(Ke,"/").concat(q,"/").concat((y=w==null?void 0:w.transformation)!==null&&y!==void 0?y:h).concat(o).concat((w==null?void 0:w.auth)===!0?"?_auth=true":"")},Se={beginAuthSession:dt,endAuthSession:pt,uploadFile:vt,url:ht},Je=P(function(){return se(ge.safe(P(function(){if($!==void 0){var c=$;return $=void 0,c.accessTokenRefreshHandle!==void 0&&clearTimeout(c.accessTokenRefreshHandle),c.isActive=!1,Ie(_t)}})))}),mt=P(function(c,o,u){var y=(0,X.ProgressSmoother)({maxValue:c.size,teardownTime:1e3,minDelayUntilFirstValue:2e3,valueIncreaseDelta:204800,valueIncreaseRatePerSecond:51200,averageTimeBetweenValues:1e3}),h=function(I){if(o.onProgress===void 0)I();else{var S=y.smoothedValue(),A=c.size;S===A&&I(),o.onProgress({bytesSent:S,bytesTotal:A,progress:Math.round(S/A*100)})}};return bt(it,h,P(function(){var w={path:o.path,metadata:o.metadata,mime:Tt(c.type),originalFileName:c.name,protocol:"1.1",size:c.size,tags:o.tags};return Z("Initiating file upload. Params = ".concat(JSON.stringify(w))),O((0,H.beginMultipartUpload)(Me(),q,w),function(I){var S=be(I);Z("Initiated file upload. Metadata = ".concat(JSON.stringify(S)));var A=function(){var G=0;return function(){if(G!==S.uploadParts.count-1)return++G}}(),ke=[S.uploadParts.first],Et=P(function(G){var ee=ke.pop();if(ee!==void 0)return Z("Dequeued part ".concat(ee.uploadPartIndex,"."),G),ee;var ve=A();if(ve===void 0){Z("No parts remaining.",G);return}return Z("Fetching metadata for part ".concat(ve,"."),G),O((0,H.getUploadPart)(Me(),q,S.uploadId,ve),be)}),_e=[],Rt=function G(ee){return O(Et(ee),function(ve){return We(function(){if(ve!==void 0){var Ve=0,It=function(Ot){var qe=Ot.bytesSent;_e[ee]===void 0?_e[ee]=qe:(_e[ee]-=Ve,_e[ee]+=qe),Ve=qe;var Ut=_e.reduce(function(jt,Nt){return jt+Nt});y.setValue(Ut)};return O(yt(c,ve,It,u,ee),function(){return se(G(ee))})}})})};return O(Promise.all(me(Array(ot).keys()).map(function(G){return O(Rt(G))})),function(){var G=Object.assign({accountId:q,file:c},S.file);return Z("File upload completed."),G})})}))}),gt=P(function(c,o,u,y){var h=new XMLHttpRequest,w=!0;return y(function(){w&&h.abort()}),pe(function(){return O(new Promise(function(I,S){h.upload.addEventListener("progress",function(A){A.lengthComputable&&u({bytesSent:A.loaded,bytesTotal:A.total})},!1),h.addEventListener("load",function(){if(u({bytesSent:o.size,bytesTotal:o.size}),Math.floor(h.status/100)===2){var A=h.getResponseHeader("etag");A==null?S(new Error("File upload error: no etag header in upload response.")):I({etag:A})}else S(new Error("File upload error: status code ".concat(h.status)))}),h.onabort=function(){return S(new Error("File upload cancelled."))},h.onerror=function(){return S(new Error("File upload error."))},h.ontimeout=function(){return S(new Error("File upload timeout."))},h.open("PUT",c),h.send(o)}))},function(I,S){return w=!1,ce(I,S)})}),yt=P(function(c,o,u,y,h){var w=o.range.inclusiveEnd===-1?new Blob:c.slice(o.range.inclusiveStart,o.range.inclusiveEnd+1);return Z("Uploading part ".concat(o.uploadPartIndex,"."),h),O(gt(o.uploadUrl,w,u,y),function(I){var S=I.etag;return O((0,H.completeUploadPart)(Me(),q,o.uploadId,o.uploadPartIndex,{etag:S}),function(A){be(A),Z("Uploaded part ".concat(o.uploadPartIndex,"."),h)})})}),bt=P(function(c,o,u){var y,h=new Promise(function(A){y=A}),w=!0,I=function(){w&&(y(),clearInterval(S),w=!1)},S=setInterval(function(){return o(I)},c);return pe(function(){return Pe(u,function(A){return O(h,function(){return A})})},function(A,ke){return I(),ce(A,ke)})}),_t=P(function(){return se(St($e,{},!0))}),ze=P(function(c,o){var u=wt();return We(function(){return u!==Se?se(c(u)):Ie(o)})}),wt=function(){var o="uploadJsAuthInstance",u=window[o];return u===void 0&&(u=Se,window[o]=Se),u},je=P(function(c,o,u){return he(Le(function(){return se(ge.safe(P(function(){if(u.isActive)return Pe(o,function(y){return O(xt(c,y),function(h){return O(Pt($e,{},{accessToken:h},!0),function(w){var I=w.ttlSeconds-at;I<Oe&&At("JWT expiration is too short: waiting for ".concat(Oe," seconds before refreshing.")),u.accessToken=w.accessToken,u.accessTokenRefreshHandle=window.setTimeout(function(){je(c,o,u).then(function(){},function(S){return Fe("Permanent error when refreshing access token: ".concat(S))})},Math.max(Oe,I)*1e3)})})})})))},function(y){return Fe("Error when refreshing access token: ".concat(y)),O(new Promise(function(h){return setTimeout(h,ut*1e3)}),function(){return se(je(c,o,u))})}))}),Pt=P(function(c,o,u,y){return O(Ne({method:"PUT",path:c,headers:o,body:u},y),function(h){return O(be(h))})}),xt=P(function(c,o){var u="Your auth API endpoint";return O(Ne({method:"GET",path:c,headers:o},!1),function(y){if(!y.ok)throw new Error("".concat(W).concat(u," returned a failed response. Please ensure the endpoint's status code is 200."));var h=y.body;if(typeof h!="string")throw new Error("".concat(W).concat(u," returned an unsupported response. Please ensure: 1) 'Content-Type: text/plain' is in the HTTP response headers 2) the status code is 200."));if(h.length===0)throw new Error("".concat(W).concat(u," returned an empty string. Please return a valid JWT instead."));if(h.trim().length!==h.length)throw new Error("".concat(W).concat(u," returned whitespace around the JWT, please remove it."));return h})}),St=P(function(c,o,u){return O(Ne({method:"DELETE",path:c,headers:o},u),function(y){be(y)})}),be=function(o){var u;if(o.ok)return o.body;var y=o.body;throw typeof((u=y==null?void 0:y.error)===null||u===void 0?void 0:u.code)=="string"?new L(y):new Error("".concat(W,"Unexpected API error."))},Ne=P(function(c,o){return(0,H.request)({BASE:c.path,WITH_CREDENTIALS:o},Object.assign(Object.assign({},c),{path:""}))}),Me=function(){var o={BASE:ye,WITH_CREDENTIALS:!0};ft&&(o.USERNAME="apikey",o.PASSWORD=e.apiKey);var u=$==null?void 0:$.accessToken;return(xe!==void 0||u!==void 0)&&(o.HEADERS=P(function(){return O(xe===void 0?{}:xe(),function(y){var h=$==null?void 0:$.accessToken;return Object.assign(Object.assign({},y),h===void 0?{}:{"authorization-token":h})},xe===void 0)})),o},Tt=function(o){var u=o.toLowerCase(),y=/^[a-z0-9]+\/[a-z0-9+\-._]+(?:;[^=]+=[^;]+)*$/;return y.test(u)?u:void 0},Z=function(o,u){lt&&console.log("".concat(W).concat(o).concat(u!==void 0?" (Worker ".concat(u,")"):""))},Fe=function(o){console.error("".concat(W).concat(o))},At=function(o){console.warn("".concat(W).concat(o))};return Se}}},k={};function b(f){if(k[f])return k[f].exports;var l=k[f]={exports:{}};return K[f](l,l.exports,b),l.exports}return function(){b.d=function(f,l){for(var _ in l)b.o(l,_)&&!b.o(f,_)&&Object.defineProperty(f,_,{enumerable:!0,get:l[_]})}}(),function(){b.o=function(f,l){return Object.prototype.hasOwnProperty.call(f,l)}}(),function(){b.r=function(f){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})}}(),b("./src/index.ts")}()})(Ye);var $t=Ye.exports;const Jt=$t.Upload({apiKey:"public_kW15bJuCbMFmcHHLgofRqvjCpFCT"});function zt({children:F,value:K}){return T(Xe,{children:K&&re("div",{className:"fixed w-[100vw] h-[100vh] top-0 left-0 z-50 flex items-center justify-center animate__aniamted animate__fadeIn",children:[T("div",{className:"absolute top-0 w-full h-full opacity-[0.5] bg-dark-midnight-blue"}),T("div",{className:"relative",children:F})]})})}function Vt({value:F,progress:K}){return T(Xe,{children:re(zt,{value:F,children:[T("h1",{className:"text-6xl text-white",children:"Storing Data..."}),T("div",{className:"relative h-[30px] w-[402px] mt-2 bg-slate-blue",children:T("div",{className:"absolute h-full bg-white",style:{width:`${K}%`}})})]})})}function Xt(){var fe,ue,le;const F=Te.useId(),K=Dt(),k=Ft(),b=kt(),[f,l]=Te.useState(),[_,H]=Te.useState(0),{register:U,watch:J,handleSubmit:oe,formState:{errors:ae},clearErrors:ie}=K,[E,Q,j]=J(["title","text","image"]),te=Te.useMemo(()=>{if(ie("image"),!j)return"";const N=j[0];return N?URL.createObjectURL(N):""},[j]),ne=`title-${F}`,de=`text-${F}`,D=`file-${F}`,X=!E||!Q||!(j!=null&&j[0]),z=X?"text-slate-blue":"text-dark-midnight-blue";return T("div",{className:"PostCreate",children:re("form",{onSubmit:oe(async N=>{var B;try{l(!0);const C=(B=N.image)==null?void 0:B[0];if(!C)throw new Error("no image");const{fileUrl:a}=await Jt.uploadFile(C,{onProgress:({progress:d})=>H(d)}),i={title:N.title,text:N.text,image:a};k({type:"store",payload:i}),b("/")}catch(C){console.log(C)}finally{l(!1)}}),children:[T(Vt,{value:f,progress:_}),T("h1",{className:"title mb-[40px] md:mb-[50px]",children:"New Post"}),re("section",{className:"flex flex-col-reverse md:flex-row justify-between",children:[T("div",{className:"w-full md:w-[590px]",children:re("div",{className:"flex flex-col gap-[20px] md:gap-[40px]",children:[T(Ce,{id:ne,label:"Add title*",errorMessage:(fe=ae.title)==null?void 0:fe.message,className:`title-textarea ${z}`,...U("title",{required:"title is required!!!"})}),T(Ce,{id:de,label:"Add text*",errorMessage:(ue=ae.text)==null?void 0:ue.message,className:`text-textarea ${z}`,...U("text",{required:"text is required!!1"})}),T("div",{children:T("button",{disabled:X,type:"submit",className:"btn-rect btn-active w-autopx-[36px]",children:"Post"})})]})}),re("div",{className:"flex flex-col items-center justify-center",children:[T("p",{className:"text-error",children:(le=ae.image)==null?void 0:le.message}),re("div",{className:`upload-img ${te&&"loaded-img"} rounded-[10px] overflow-hidden`,children:[te?T(qt,{src:te,className:"w-full h-full object-cover rounded-[10px]"}):T("img",{src:Ht,className:"w-full h-full object-cover rounded-[10px]",alt:""}),re("div",{className:"img-btn",children:[T("div",{className:"tint"}),re(Lt,{id:D,...U("image",{required:"image is required!!!",validate(N){const B=N[0];return B?B.size>5e5?"image file too large exceeds 500KB":!0:"no image file selected"}}),children:[T("span",{className:"text-[24px]",children:"+"}),T("span",{children:"Add Image"})]})]})]})]})]})]})})}export{Xt as default};
